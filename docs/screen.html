<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="styles.css">
        <script src="scripts/uheprng.js"></script>
    </head>
    <body>
    <script type="text/javascript">
        const videoUrls = [
            "/janefrancesdunlop/sit/docs/videos/abrasive.mp4",
            "/janefrancesdunlop/sit/docs/videos/swimming.mp4",
            "/janefrancesdunlop/sit/docs/videos/echoes ii.mp4",
            "/janefrancesdunlop/sit/docs/videos/memory.mp4", 
            "/janefrancesdunlop/sit/docs/videos/flamingos.mp4", 
            "/janefrancesdunlop/sit/docs/videos/sounds ii.mp4", 
            "/janefrancesdunlop/sit/docs/videos/intimacy.mp4",
        ]

        const randomizer = uheprng()
        const numVideosToCombine = 3
        let selectedVideos = []
        let videosPlayed = 0
        

        const getRandomNumbers = () => {
            const userInput = document.getElementById("user-input").value
            randomizer.initState();
            randomizer.hashString(userInput)

            return Array(numVideosToCombine).fill().map(n => randomizer(videoUrls.length))
        }

        const generateVideo = () => {
            const videoIndexes = getRandomNumbers()
            const videoContainerHtml = document.getElementById("video-container")
            selectedVideos.map(video => pauseVideo(video))
            selectedVideos = videoIndexes.map(index => {
                const video = document.createElement('video')
                video.src = videoUrls[index]
                video.id = `video-${index}`
                videoContainerHtml.appendChild(video)
                video.load()

                return video
            })
            videosPlayed = 0

            playNextVideo()
        }

        const playNextVideo = () => {
            const previousVideo = selectedVideos[videosPlayed -1]
            previousVideo && pauseVideo(previousVideo)

            const currentVideo = selectedVideos[videosPlayed]
            if (!currentVideo) return false

            playVideo(currentVideo)
            videosPlayed++

            return currentVideo
        }

        const playVideo = (video) => {
            video.classList.add("playing");
            video.play()
            video.addEventListener('ended', playNextVideo, false);
        }

        const pauseVideo = (video) => {
            video.removeEventListener('ended', playNextVideo);
            !video.paused && video.pause()
            video.classList.remove("playing");
        }
    </script>
</html>
Â© 2022 GitHub, Inc.
Terms
