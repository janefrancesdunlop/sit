<html lang='en' class=''>
  <head>
    <style>
        body {
        background-color: #4C4C4C;
        margin: 200px 40%;
      }

      form {
        background-color: #595959;
        width: 300px;
        height: 44px;
        border-radius: 5px;
        display:flex;
        flex-direction:row;
        align-items:center;
      }

      input {
        all: unset;
        font: 16px system-ui;
        color: #fff;
        height: 100%;
        width: 100%;
        padding: 6px 10px;
      }

      ::placeholder {
        color: #fff;
        opacity: 0.7; 
      }

      svg {
        color: #fff;
        fill: currentColor;
        width: 24px;
        height: 24px;
        padding: 10px;
      }

      button {
        all: unset;
        cursor: pointer;
        width: 44px;
        height: 44px;
      }
    </style>
  </head>
  <body>
    <form role="enter text" id="form">
      <input type="user-input" id="query" name="q" placeholder="enter text..." aria-label="enter text">
        <a href="javascript:generateVideo();">Generate Video</a>
        <div id="video-container"></div>
    </form>
   <script type="text/javascript">
        const videoUrls = [
            // replace these with the path or url to each of your fragment videos
            "https://vimeo.com/678318057/4b23225724",
            "https://vimeo.com/678318344/21e9b40fcb",
            "https://vimeo.com/678319873/660ab0ae8f",
            "https://vimeo.com/678318898/86057d4e95", 
            "https://vimeo.com/678319459/d2cbadca5c4",
        ]

        const randomizer = uheprng()
        const numVideosToCombine = 5
        let selectedVideos = []
        let videosPlayed = 0
        

        const getRandomNumbers = () => {
            const userInput = document.getElementById("user-input").value
            randomizer.initState();
            randomizer.hashString(userInput)

            return Array(numVideosToCombine).fill().map(n => randomizer(videoUrls.length))
        }

        const generateVideo = () => {
            const videoIndexes = getRandomNumbers()
            const videoContainerHtml = document.getElementById("video-container")
            selectedVideos.map(video => pauseVideo(video))
            selectedVideos = videoIndexes.map(index => {
                const video = document.createElement('video')
                video.src = videoUrls[index]
                video.id = `video-${index}`
                videoContainerHtml.appendChild(video)
                video.load()

                return video
            })
            videosPlayed = 0

            playNextVideo()
        }

        const playNextVideo = () => {
            const previousVideo = selectedVideos[videosPlayed -1]
            previousVideo && pauseVideo(previousVideo)

            const currentVideo = selectedVideos[videosPlayed]
            if (!currentVideo) return false

            playVideo(currentVideo)
            videosPlayed++

            return currentVideo
        }

        const playVideo = (video) => {
            video.classList.add("playing");
            video.play()
            video.addEventListener('ended', playNextVideo, false);
        }

        const pauseVideo = (video) => {
            video.removeEventListener('ended', playNextVideo);
            !video.paused && video.pause()
            video.classList.remove("playing");
        }
    </script>
</html>
  </body>
</html>
